<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Aaqa Ishtyaq, Ramblings on programming, tech and life." name=description><title>Aaqa Ishtyaq</title><meta content="The ultimate PostgreSQL cheatsheet" name=title><meta content="Aaqa Ishtyaq" property=og:site_name><meta content=article property=og:type><meta content="The ultimate PostgreSQL cheatsheet" property=og:title><meta property=og:description><meta content=https://aaqa.dev/https://aaqa.dev/notes/the-ultimate-postgresql-cheatsheet/ property=og:url><meta content=2018-05-09 property=article:published_time><meta content=2018-05-09 property=article:modified_time><meta content=summary name=twitter:card><meta content="The ultimate PostgreSQL cheatsheet" name=twitter:title><meta name=twitter:description><meta content=https://aaqa.dev/https://aaqa.dev/notes/the-ultimate-postgresql-cheatsheet/ name=twitter:url><meta content=@aaqaishtyaq name=twitter:site><meta content="Written by" name=twitter:label1><meta content="Aaqa Ishtyaq" name=twitter:data1><meta content=@aaqaishtyaq name=twitter:creator><link href=https://aaqa.dev/theme.css rel=stylesheet><link href="https://aaqa.dev/ rss.xml" rel=alternate title=RSS type=application/rss+xml><script async data-token=aa8756e9-c3cd-41e6-8a91-e3c8203201db src=https://beamanalytics.b-cdn.net/beam.min.js></script><link as=font crossorigin href=/fonts/iosevka-regular.woff2 rel=preload type=font/woff2><body><div class=content><header><div class=header-left><a class=logo href=https://aaqa.dev/>Aaqa Ishtyaq</a></div><div class=header-right><nav itemscope itemtype=http://schema.org/SiteNavigationElement><ul><li class=nav><a href=https://aaqa.dev/notes/ itemprop=url> <span itemprop=name>Notes </span> </a><li class=nav><a href=https://aaqa.dev/reading/ itemprop=url> <span itemprop=name>Reading </span> </a><li class=nav><a href=https://aaqa.dev/travel/ itemprop=url> <span itemprop=name>Travel </span> </a><li class=nav><a href=https://aaqa.dev/tils/ itemprop=url> <span itemprop=name>TIL </span> </a><li class=nav><a href=https://aaqa.dev/uses/ itemprop=url> <span itemprop=name>Uses </span> </a><li class=nav><a href=https://aaqa.dev/contact/ itemprop=url> <span itemprop=name>Contact </span> </a><li class=nav><a href=/rss.xml itemprop=url> <span itemprop=name>Feed</span> </a></ul></nav></div></header><main><article itemscope itemtype=http://schema.org/BlogPosting><div itemprop=headline><h1>The ultimate PostgreSQL cheatsheet</h1><div class=border></div><div class=page-meta><time datetime=" 2018-05-09" class=date itemprop=datePublished> 09 May 2018 </time><div class=reading-time><div>4200 words, 21 minutes to read</div></div></div></div><div itemprop=articleBody><p>So I had been working with Django, Flask and Express.js for a while now, and my database of choice for every single project has of course always been Postgres. What makes these frameworks great (regardless of language) is the ability to use an ORM (Object Relational Mapper) that sits between your code and the DB. It does all the heavy lifting for you and takes care of executing SQL queries on your behalf.<p>This is great but I couldn't stop thinking "what if I have to manually debug something directly into postgres ?" This is when reality slapped me in the face, I barely knew the SQL Language. So I thought It'd be fun to create a cheatsheet that I (and you) could keep as a reference for these times when you absolutely need to set this column to UNIQUE and you don't know how.<p>Enjoy ! (and yeah I went all in with the pokemon references)<h3 id=create-a-user-or-role>Create a User (or Role)</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> create a user without privileges*/</span>
</span><span class="z-source z-sql">CREATE ROLE aaqa;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> create a user with privileges*/</span>
</span><span class="z-source z-sql">CREATE ROLE aaqa LOGIN CREATEDB CREATEROLE REPLICATION;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> Add privileges to existing user*/</span>
</span><span class="z-source z-sql">ALTER ROLE aaqa <span class="z-keyword z-other z-DML z-sql">WITH</span> LOGIN CREATEROLE CREATEDB REPLICATION;
</span></code></pre><h3 id=make-a-user-superuser-bump-their-privileges>Make a user superuser (bump their privileges)</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">ALTER ROLE aaqa <span class="z-keyword z-other z-DML z-sql">WITH</span> superuser;
</span></code></pre><h3 id=rename-an-existing-user>Rename an existing user</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">ALTER ROLE psyduck RENAME TO brock;
</span></code></pre><h3 id=create-a-db>Create a DB</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">DATABASE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">pokemons</span></span>;
</span></code></pre><h3 id=rename-a-db>Rename a DB</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">DATABASE</span> </span>pokemons RENAME TO charizard;
</span></code></pre><h3 id=create-a-table-in-a-db>Create a table in a DB</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">TABLE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">trainers</span></span>(
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    id <span class="z-storage z-type z-sql">INT</span> <span class="z-storage z-modifier z-sql">PRIMARY KEY</span> <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>,
</span><span class="z-source z-sql">    pokemon_type <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">50</span>),
</span><span class="z-source z-sql">    name <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">50</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span> UNIQUE,
</span><span class="z-source z-sql">    gender <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">50</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span> UNIQUE
</span><span class="z-source z-sql">);
</span></code></pre><h3 id=delete-a-db>Delete a DB</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-drop z-sql"><span class="z-keyword z-other z-create z-sql">DROP</span> <span class="z-keyword z-other z-sql">DATABASE</span></span> pokemons;
</span></code></pre><h3 id=delete-a-user>Delete a user</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> assuming there's a pikachu role on the system */</span>
</span><span class="z-source z-sql">DROP ROLE pikachu;
</span></code></pre><h3 id=change-db-ownership>Change DB ownership</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">DATABASE</span> </span>pokemons OWNER TO aaqa;
</span></code></pre><h3 id=rename-a-table>Rename a table</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>trainers RENAME TO gym_trainers;
</span></code></pre><h3 id=change-column-type>Change column type</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ALTER COLUMN pokemon_type TYPE <span class="z-storage z-type z-sql">TEXT</span>; <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> it makes zero
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">sense to want to change this column type to TEXT but YOLO */</span>
</span></code></pre><h3 id=rename-a-column>Rename a column</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ALTER COLUMN name RENAME TO trainer_name;
</span></code></pre><h3 id=add-a-column-to-a-table>Add a column to a table</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ADD COLUMN bio <span class="z-storage z-type z-sql">TEXT</span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">ALTER TABLE &LTtable_name>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">ADD COLUMN &LTcolumn_name> &LTdata_type> &LTconstraints if any>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span></code></pre><h3 id=add-a-column-with-a-unique-constraint>Add a column with a UNIQUE constraint</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ADD COLUMN age <span class="z-storage z-type z-sql">INT</span> UNIQUE; <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> cause why not */</span>
</span></code></pre><h3 id=add-a-column-with-a-not-null-constraint>Add a column with a NOT NULL constraint</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ADD COLUMN main_pokemon <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">60</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>;
</span></code></pre><h3 id=remove-not-null-constraint-from-a-column>Remove NOT NULL CONSTRAINT from a column</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ALTER COLUMN main_pokemon DROP <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>;
</span></code></pre><h3 id=add-a-column-with-a-not-null-constraint-and-a-default-value>Add a column with a NOT NULL constraint and a DEFAULT value</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>gym_trainers ADD COLUMN city <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">80</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span> <span class="z-storage z-modifier z-sql">DEFAULT</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Indigo
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">Plateau<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span></code></pre><h3 id=add-a-column-with-a-check-constraint>Add a column with a CHECK constraint</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">TABLE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">trainers</span></span>(
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    id <span class="z-storage z-type z-sql">INT</span> <span class="z-storage z-modifier z-sql">PRIMARY KEY</span>,
</span><span class="z-source z-sql">    trainer_name <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">50</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>,
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        method 1
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        Add the check yolo style
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    */</span>
</span><span class="z-source z-sql">    age <span class="z-storage z-type z-sql">INT</span> <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span> <span class="z-storage z-modifier z-sql">CHECK</span> (age <span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">18</span>)
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        method 2
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        Add a named constraint for better error handling
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    */</span>
</span><span class="z-source z-sql">    age <span class="z-storage z-type z-sql">INT</span> <span class="z-storage z-modifier z-sql">CONSTRAINT</span> legal_age <span class="z-storage z-modifier z-sql">CHECK</span> (age <span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">18</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        method 3
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        Add the constraint at the end
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">        for more clarity
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    */</span>
</span><span class="z-source z-sql">    age <span class="z-storage z-type z-sql">INT</span> <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>,
</span><span class="z-source z-sql">    <span class="z-storage z-modifier z-sql">CONSTRAINT</span> legal_age <span class="z-storage z-modifier z-sql">CHECK</span> (age <span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">18</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>
</span><span class="z-source z-sql">);
</span></code></pre><h3 id=add-a-constraint-to-an-existing-column>Add a CONSTRAINT to an existing column</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>trainers ADD <span class="z-storage z-modifier z-sql">CONSTRAINT</span> unique_name UNIQUE (trainer_name);
</span></code></pre><h3 id=remove-a-named-constraint-from-a-table>Remove a named CONSTRAINT from a table</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>trainers DROP <span class="z-storage z-modifier z-sql">CONSTRAINT</span> unique_name;
</span></code></pre><h3 id=insert-a-row-into-a-table>Insert a row into a table</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">INSERT INTO</span> trainers <span class="z-keyword z-other z-DML z-II z-sql">VALUES</span> (<span class="z-constant z-numeric z-sql">1</span>, <span class="z-constant z-numeric z-sql">23</span>, <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>brock<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>);
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> or */</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">INSERT INTO</span> trainers (age, trainer_name)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-II z-sql">VALUES</span> (<span class="z-constant z-numeric z-sql">1</span>, <span class="z-constant z-numeric z-sql">23</span>, <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>brock<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>);
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    Note that in the second case we don't have pass
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    the id. Postgres will automatically generate and autoincrement
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    it for us. To omit the id column we must use named inserts otherwise an
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    error is raised.
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span></code></pre><h3 id=insert-multiple-rows-into-a-table>Insert multiple rows into a table</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">INSERT INTO</span> trainers (age, trainer_name) <span class="z-keyword z-other z-DML z-II z-sql">VALUES</span>
</span><span class="z-source z-sql">(<span class="z-constant z-numeric z-sql">19</span>, <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>misty<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>),
</span><span class="z-source z-sql">(<span class="z-constant z-numeric z-sql">22</span>, <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>chen<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>),
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> ... */</span>
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> ... */</span>
</span></code></pre><h3 id=clear-a-table-without-deleting-it>Clear a table (without deleting it)</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">TRUNCATE</span> trainers;
</span></code></pre><h3 id=set-the-primary-key-type-to-a-serial-an-auto-incrementing-integer>Set the primary key type to a serial (An auto incrementing integer)</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> Considering this table structure */</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">TABLE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">pokemon_list</span></span> (
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    id <span class="z-storage z-type z-sql">INT</span> <span class="z-storage z-modifier z-sql">PRIMARY KEY</span>,
</span><span class="z-source z-sql">    <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> ... */</span>
</span><span class="z-source z-sql">    <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> ... */</span>
</span><span class="z-source z-sql">    <span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> ... */</span>
</span><span class="z-source z-sql">);
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    1.
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    Create a sequence for the auto generating prinary key
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    It follows the tablename_columnname_seq
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">SEQUENCE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">pokemon_list_id_seq</span></span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> 2. Set the id column to not null */</span>
</span><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>pokemon_list ALTER COLUMN id <span class="z-keyword z-other z-DML z-sql">SET</span> <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> 3. Set the default value to the next value in the sequence*/</span>
</span><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>pokemon_list
</span><span class="z-source z-sql">ALTER COLUMN pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SET</span> <span class="z-storage z-modifier z-sql">DEFAULT</span> nextval(<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>pokemon_list_id_seq<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>);
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> 4. Link the sequence to the correct table and column */</span>
</span><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">SEQUENCE</span> </span>pokemon_list_id_seq OWNED BY <span class="z-constant z-other z-database-name z-sql">pokemon_list</span>.<span class="z-constant z-other z-table-name z-sql">id</span>;
</span></code></pre><h3 id=import-data-from-a-file>Import data from a file</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    Must use absolute path and the user must have appropriate permissions
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    Defaults to importing using TAB as the default parameter.
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    We'll use a csv file as an example
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">COPY pokemon_list <span class="z-keyword z-other z-DML z-sql">FROM</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>/path/to/yourfile.csv<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span> DELIMITER <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>,<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    This only works if a pk is specified for each row
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    The (my) prefered way to do it is the following
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">COPY pokemon_list (name, level, type) <span class="z-keyword z-other z-DML z-sql">FROM</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>/path/to/yourfile.csv<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span> DELIMITER <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>,<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> It's much more flexible because you control what data you actually import*/</span>
</span></code></pre><h3 id=export-a-table-to-a-file>Export a table to a file</h3><p>To be able to export a table to a file, we need to ensure that postgres has write permissions to the file.<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> chmod 777 /path/to/directory <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> This is just an example, edit this as needed</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></code></pre><p>We can now safely copy the table to the file.<pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">COPY pokemon_list TO <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>/path/to/file.csv<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span> DELIMITER <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>,<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span></code></pre><h3 id=select-columns-by-using-aliases>Select columns by using aliases</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> name <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> pokemon_name, type <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> pokemon_type
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span></code></pre><h3 id=select-elements-based-on-a-criteria>Select elements based on a criteria</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">WHERE</span> id <span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">3</span>;
</span></code></pre><h3 id=select-elements-based-on-string-comparison>Select elements based on string comparison</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">WHERE</span> type <span class="z-keyword z-operator z-logical z-sql">LIKE</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>%water%<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span></code></pre><h3 id=select-all-results-and-order-them-by-id-in-reverse>Select all results and order them by id in reverse</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">ORDER BY</span> id <span class="z-keyword z-other z-order z-sql">DESC</span>;
</span></code></pre><h3 id=select-all-results-and-order-them-by-a-column-name>Select all results and order them by a column name</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">ORDER BY</span> level;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> If the column you're ordering by is not of type INT then the ordering will be
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">done alphabetically */</span>
</span></code></pre><h3 id=select-distinct-column-from-table>Select DISTINCT column from table</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT DISTINCT</span> type <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> pokemon_type
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span></code></pre><h3 id=limit-the-results-from-a-select-query>Limit the results from a SELECT query</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">LIMIT</span> <span class="z-constant z-numeric z-sql">3</span>;
</span></code></pre><h3 id=select-the-last-3-items>Select the last 3 items</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">ORDER BY</span> id <span class="z-keyword z-other z-order z-sql">DESC</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">LIMIT</span> <span class="z-constant z-numeric z-sql">3</span>;
</span></code></pre><h3 id=create-two-tables-with-a-foreign-key-relationship>Create two tables with a foreign key relationship</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">TABLE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">pokemon_types</span></span>(
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    id <span class="z-storage z-type z-sql">SERIAL</span> <span class="z-storage z-modifier z-sql">PRIMARY KEY</span>,
</span><span class="z-source z-sql">    type_name <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">120</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>
</span><span class="z-source z-sql">)
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">TABLE</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">pokemon_list</span></span>(
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">    id <span class="z-storage z-type z-sql">serial</span> <span class="z-storage z-modifier z-sql">PRIMARY KEY</span>,
</span><span class="z-source z-sql">    pokemon_name <span class="z-storage z-type z-sql">CHAR</span>(<span class="z-constant z-numeric z-sql">120</span>) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>,
</span><span class="z-source z-sql">    pokemon_level <span class="z-storage z-type z-sql">INT</span> <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>,
</span><span class="z-source z-sql">    pokemon_type <span class="z-storage z-type z-sql">INT</span> <span class="z-storage z-modifier z-sql">REFERENCES</span> pokemon_types(id) <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span>,
</span><span class="z-source z-sql">    <span class="z-storage z-modifier z-sql">CONSTRAINT</span> pokemon_level_not_zero <span class="z-storage z-modifier z-sql">CHECK</span> (pokemon_level <span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">0</span>)
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">);
</span></code></pre><h3 id=perform-joins-based-on-a-criteria>Perform Joins based on a criteria</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> name, level, <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">name</span> <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> type
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">JOIN</span> pokemon_types
</span><span class="z-source z-sql">ON pokemon_type_id  <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">id</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">WHERE</span> pokemon_type_id <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-numeric z-sql">1</span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> Will return the name, level and type name for all water pokemons */</span>
</span></code></pre><h3 id=perform-joins>Perform joins</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> name, level, <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">name</span> <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> type
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">JOIN</span> pokemon_types
</span><span class="z-source z-sql">ON pokemon_type_id  <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">id</span>;
</span></code></pre><h3 id=create-a-view-based-on-a-join>Create a VIEW based on a JOIN</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">CREATE</span> <span class="z-keyword z-other z-sql">VIEW</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql">pokemonswithtypes </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">AS</span></span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> name, level <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">name</span> <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> type
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">JOIN</span> pokemon_types
</span><span class="z-source z-sql">ON pokemon_type_id <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">id</span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> To see the data */</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-variable z-language z-star z-sql">*</span> <span class="z-keyword z-other z-DML z-sql">FROM</span> pokemonswithtypes;
</span></code></pre><h3 id=update-the-view-change-the-query>Update the VIEW (Change the query)</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> name, <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">name</span> <span class="z-keyword z-operator z-assignment z-alias z-sql">AS</span> type
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">JOIN</span> pokemon_types
</span><span class="z-source z-sql">ON pokemon_type <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-other z-database-name z-sql">pokemon_types</span>.<span class="z-constant z-other z-table-name z-sql">id</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">WHERE</span> pokemon_type <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-numeric z-sql">1</span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> only show the name and type for water pokemons */</span>
</span></code></pre><h3 id=delete-the-view>Delete the VIEW</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-drop z-sql"><span class="z-keyword z-other z-create z-sql">DROP</span> <span class="z-keyword z-other z-sql">VIEW</span></span> pokemonswithtypes;
</span></code></pre><h3 id=use-aggregate-functions-min-max-sum-count-avg>Use aggregate functions (MIN, MAX, SUM, COUNT, AVG)</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> MAX */</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-support z-function z-aggregate z-sql">MAX</span>(pokemon_level)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> MIN */</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-support z-function z-aggregate z-sql">MIN</span>(pokemon_level)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> AVG */</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-support z-function z-aggregate z-sql">AVG</span>(pokemon_level)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> ROUND */</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> ROUND(<span class="z-support z-function z-aggregate z-sql">AVG</span>(pokemon_level))
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> COUNT */</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-support z-function z-aggregate z-sql">COUNT</span>(<span class="z-variable z-language z-star z-sql">*</span>)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> SUM */</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> <span class="z-support z-function z-aggregate z-sql">SUM</span>(pokemon_level)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span></code></pre><h3 id=use-boolean-aggregate-functions>Use boolean aggregate functions</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> Add a column is_legendary of type boolean to table pokemon_list */</span>
</span><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>pokemon_list ADD COLUMN is_legendary BOOL <span class="z-keyword z-operator z-logical z-sql">NOT</span> <span class="z-constant z-language z-sql">NULL</span> <span class="z-storage z-modifier z-sql">DEFAULT</span> <span class="z-constant z-boolean z-sql">TRUE</span>;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>  BOOL_AND
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    returns a result if **ALL** records have that column set to true
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> BOOL_AND(is_legendary) <span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span>
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    BOOL_OR
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">    returns a result if one or more records have that column set to true
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">*/</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SELECT</span> BOOL_OR(is_legendary) <span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span></code></pre><h3 id=update-a-table-and-change-all-column-values>Update a table and change all column values</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">UPDATE</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SET</span> is_legendary <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-boolean z-sql">FALSE</span>;
</span></code></pre><h3 id=update-a-table-and-change-value-based-on-a-criteria>Update a table and change value based on a criteria</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">UPDATE</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">SET</span> is_legendary <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-boolean z-sql">TRUE</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">WHERE</span> id <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-numeric z-sql">2</span>;
</span></code></pre><h3 id=delete-row-with-specific-id>Delete row with specific id</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">DELETE</span> <span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list <span class="z-keyword z-other z-DML z-sql">WHERE</span> id <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-numeric z-sql">4</span>
</span></code></pre><h3 id=delete-rows-withing-a-range-of-ids>Delete rows withing a range of ids</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">DELETE</span> <span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">WHERE</span> id <span class="z-keyword z-operator z-logical z-sql">BETWEEN</span> <span class="z-constant z-numeric z-sql">1</span> <span class="z-keyword z-operator z-logical z-sql">AND</span> <span class="z-constant z-numeric z-sql">4</span>;
</span></code></pre><h3 id=delete-all-rows>Delete all rows</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">DELETE</span> <span class="z-keyword z-other z-DML z-sql">FROM</span> pokemon_list;
</span></code></pre><p><em>Note: The difference between DELETE and DROP or TRUNCATE is that the former can be undone (rolled back) the latter can't</em><h3 id=alter-a-table-to-drop-a-constraint-if-it-exist>Alter a table to drop a CONSTRAINT if it exist</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-alter z-sql"><span class="z-keyword z-other z-create z-sql">ALTER</span> <span class="z-keyword z-other z-table z-sql">TABLE</span> </span>pokemon_types
</span><span class="z-source z-sql">DROP <span class="z-storage z-modifier z-sql">CONSTRAINT</span> IF <span class="z-keyword z-operator z-logical z-sql">EXISTS</span> unique_type_name;
</span></code></pre><h3 id=comments>Comments</h3><pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-object-comments z-sql">COMMENT ON TABLE pokemon_types is </span><span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>pokemon with types<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> To display the comment, in psql simply run \dt+. It will return a description
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">column containing that comment. It's useful when working on a legacy database
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">for example*/</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> Please note that comments aren't exclusive to tables, they can be executed on
</span></span><span class="z-source z-sql"><span class="z-comment z-block z-c">schemas and multiple other objects.*/</span>
</span></code></pre><p><em>Note: If you find errors, typos or would like to add new tips, feel free to reach out to me on twitter. I'm <a rel="noopener nofollow noreferrer" href=https://twitter.com/aaqaishtyaq target=_blank>@aaqaishtyaq</a>. Thank you for reading ! And if you find this useful, share it with your friends and coworkers !</em></div></article></main><footer><div class=border></div><div class=footer><small class=footer-left> Copyright © Aaqa Ishtyaq </small><small class=footer-right> Links: <a href=https://github.com/aaqaishtyaq target=_blank>Github</a> | <a href=https://linkedin.com/in/aaqaishtyaq target=_blank>LinkedIn</a> </small></div><br><small class=footer> <a class=pgp href=https://keys.openpgp.org/vks/v1/by-fingerprint/AFB766F59A198D35DD8F925AC4BE1CE588EB9E21 target=_blank> AFB7 66F5 9A19 8D35 DD8F 925A C4BE 1CE5 88EB 9E21 </a> </small></footer></div>