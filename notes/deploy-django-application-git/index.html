<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Aaqa Ishtyaq, Ramblings on programming, tech and life." name=description><title>Aaqa Ishtyaq</title><meta content="Deploy your Django application with git" name=title><meta content="Aaqa Ishtyaq" property=og:site_name><meta content=article property=og:type><meta content="Deploy your Django application with git" property=og:title><meta property=og:description><meta content=https://aaqa.dev/https://aaqa.dev/notes/deploy-django-application-git/ property=og:url><meta content=2018-05-07 property=article:published_time><meta content=2018-05-07 property=article:modified_time><meta content=summary name=twitter:card><meta content="Deploy your Django application with git" name=twitter:title><meta name=twitter:description><meta content=https://aaqa.dev/https://aaqa.dev/notes/deploy-django-application-git/ name=twitter:url><meta content=@aaqaishtyaq name=twitter:site><meta content="Written by" name=twitter:label1><meta content="Aaqa Ishtyaq" name=twitter:data1><meta content=@aaqaishtyaq name=twitter:creator><link href=https://aaqa.dev/theme.css rel=stylesheet><link href="https://aaqa.dev/ rss.xml" rel=alternate title=RSS type=application/rss+xml><script async data-token=aa8756e9-c3cd-41e6-8a91-e3c8203201db src=https://beamanalytics.b-cdn.net/beam.min.js></script><link as=font crossorigin href=/fonts/iosevka-regular.woff2 rel=preload type=font/woff2><body><div class=content><header><div class=header-left><a class=logo href=https://aaqa.dev/>Aaqa Ishtyaq</a></div><div class=header-right><nav itemscope itemtype=http://schema.org/SiteNavigationElement><ul><li class=nav><a href=https://aaqa.dev/notes/ itemprop=url> <span itemprop=name>Notes </span> </a><li class=nav><a href=https://aaqa.dev/reading/ itemprop=url> <span itemprop=name>Reading </span> </a><li class=nav><a href=https://aaqa.dev/travel/ itemprop=url> <span itemprop=name>Travel </span> </a><li class=nav><a href=https://aaqa.dev/tils/ itemprop=url> <span itemprop=name>TIL </span> </a><li class=nav><a href=https://aaqa.dev/uses/ itemprop=url> <span itemprop=name>Uses </span> </a><li class=nav><a href=https://aaqa.dev/contact/ itemprop=url> <span itemprop=name>Contact </span> </a><li class=nav><a href=/rss.xml itemprop=url> <span itemprop=name>Feed</span> </a></ul></nav></div></header><main><article itemscope itemtype=http://schema.org/BlogPosting><div itemprop=headline><h1>Deploy your Django application with git</h1><div class=border></div><div class=page-meta><time datetime=" 2018-05-07" class=date itemprop=datePublished> 07 May 2018 </time><div class=reading-time><div>2595 words, 13 minutes to read</div></div></div></div><div itemprop=articleBody><p>I'm going to make a bold statement: Django replaced Ruby on Rails in the hearts of many developers. With this increase in popularity, we've seen tons or articles, videos and websites dedicated to setting un Django and creating apps using the framework.<p>Unfortunately, when it comes to deployment, many of these resources only mention heroku or pythonanywhere. While these are excellent solutions for quickly shipping your MVP or prototype, it lacks a bit in terms of flexibility if you want to create your custom deployment pipeline.<p><strong>tl-dr: If you manage your own server infrastructure, we're going to setup a git deployment workflow with django</strong><h2 id=what-you-ll-need>What you'll need</h2><ul><li>Working knowledge of ssh<li>Working knowledge of git<li>Working knowledge of the bash shell<li>Basic linux command line skills (sorry hipsters)<li>(Very) Basic knowledge of vi/vim<li>Patience</ul><p>The typical workflow usually looks like this:<ul><li>You have your development environment, either on your local machine or a remote server<li>A git server (on GitHub, BitBucket, GitLab ...) that you and your team push your work to<li>A production server (aka your live app).</ul><p>Usually when you commit and push work you do something like:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> push origin <span class="z-keyword z-operator z-assignment z-redirection z-shell"><</span>branch_name<span class="z-keyword z-operator z-assignment z-redirection z-shell">></span>
</span></span></code></pre><p><code>origin</code> being the name of the remote server your code is being pushed to. What took me a while to realise is that you can have many remotes for your repo that point to different servers.<p>The idea here is to add a new remote to our repo. It will point to our production server such that when we run <code>git push live master</code>, our code will be copied over to there.<h2 id=on-the-production-server>On the production server</h2><p>To achieve this, we have some setup work to do on our live server. So go ahead and connect to it via ssh.<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ssh</span></span><span class="z-meta z-function-call z-arguments z-shell"> user@host_or_ip_address</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> If your server's ssh service listens on a port other than 22, you'll need</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> to add the -p switch</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ssh</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> PORT user@host_or_ip_address</span>
</span></code></pre><p>Once we're in, we need to create a new directory for our application. This is where our deployed code will be copied to.<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mkdir</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> /home/user/sites/myawesomedjangoproject</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> Some people prefer to use /var/www/&LTproject_name>, it's really up to you. Just</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> make sure remember the path to your project</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></code></pre><p>Now head over to <code>/var</code> and create another directory called <code>repos</code><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> /var</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> mkdir repos</span>
</span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> Depending on your setup, you might need sudo priveleges</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></code></pre><p>Inside that directory, we need to create a folder named after our project (or domain name) and append it with <code>.git</code> (not necessary but it's good practice)<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> mkdir myawsomedjangoproject.com.git</span>
</span></code></pre><p>Inside this folder we'll create what is called a <code>bare</code> repository. To do this just run:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> init<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>bare</span></span>
</span></code></pre><p>If you run <code>ls</code> inside that folder you'll see a bunch of files and directories (the same ones found inside the <code>.git</code> folder in normal repos). One of these directories is called <code>hooks</code>.<p>Inside that folder, we'll need create a file called post-receive.<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> Assuming you are inside /var/repos/yourproject.git</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> touch hooks/post-receive</span>
</span></code></pre><p>Now open it up with vi/vim<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> vim hooks/post-receive</span>
</span></code></pre><p>Hit <code>i</code> to switch to insert mode, and add the following to the file:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">!/bin/bash</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">DEPLOYDIR</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">/home/username/sites/myawesomedjangoproject</span> <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> or whatever path you chose</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">GIT_WORK_TREE</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> checkout<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span></span>
</span></code></pre><p><strong>Please note that the first shebang line is important, it instructs git to use bash instead of the default shell. Otherwise it won't activate our (soon to be created) virtual environment</strong><p>exit vim by hitting <code>:wq</code> (which in vim lingo means write and quit)<p>What we've done here is set two variables. <code>DEPLOYDIR</code> is an alias for our project path on the server, and <code>GIT_WORK_TREE</code> which is a special variable that tells git to copy the code it receives inside of our <code>DEPLOYDIR</code>. This ensures that we're always running the latest version of our code.<p>As you've probably noticed, this post-receive file looks very much like a shell script. That's because it is (as explained above). It's executed every time you push code to the repo.<p>The last thing we need to is make the script executable, so as soon as you're back in the shell run:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> chmod +x hooks/post-receive</span>
</span></code></pre><p>You can now exit the server and go back to your local machine.<h2 id=on-our-local-dev-environment>On our local dev environment</h2><p>Now that we've created our remote repository, we need to add it to our project (I like to call mine <code>live</code>).<p>It takes one simple command:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> remote add live root@ip_address:/var/repos/myawesomedjangoproject.git</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> And if your server's ssh service listens on a different port :</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> remote add live ssh://root@ip_address:PORT/var/repos/myawesomedjangoproject.git</span>
</span><span class="z-source z-shell z-bash">
</span></code></pre><p>To make sure it was added, you can print the list of available remotes by running:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> remote<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>v <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> v for verbose</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span><span class="z-source z-shell z-bash">
</span></code></pre><p>and that's it ! You can now make changes locally, commit and deploy them live (or staging if it's a staging server) and see your changes instantly.<p>You can obviously still push to github/lab or bitbucket with <code>git push origin &LTbranch></code> like you normally would.<h2 id=bonus>Bonus</h2><p>As I mentioned in the first part, the post-receive hook is a shell script. Which means you can use it to perform all kinds of tasks against your code, like running front-end builds, installing dependencies, etc ...<p>Here's an example for a basic Django App:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">!/bin/bash</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">DEPLOYDIR</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">/home/username/site/myawesomedjangoproject</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Starting code update <span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
</span><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">GIT_WORK_TREE</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> checkout<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished code update <span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-control z-conditional z-if z-shell">if</span> <span class="z-meta z-function-call z-arguments z-shell"><span class="z-support z-function z-double-brace z-begin z-shell">[[</span> <span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">-</span>d</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span>/ENV_projectname<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>]]; then
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">    echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Cleaning virtualenv<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">    cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; rm -rf ENV_projectname cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">    echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished creating virtualenv<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">fi
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Creating virtualenv<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; virtualenv <span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">-</span>p</span> python3 ENV_projectname; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished creating virtualenv<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Activating virtualEnv<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; source ENV_projectname/bin/activate; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished activating virtualenv<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Pulling down pip dependencies<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; pip install <span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">-</span>r</span> requirements.txt; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished pulling down pip dependencies<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Staring DB migration<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; python manage.py makemigrations; python manage.py migrate; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished DB migration <span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Pulling Node Dependencies<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; sudo npm install; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished Pulling Node Dependencies<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Building the Front end<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; sudo gulp build; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished building the Front end<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Collecting static assets<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">cd <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">DEPLOYDIR</span></span><span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>; python manage.py collectstatic --clear --no-input; cd -
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished collecting static assets<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Restarting App<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">sudo service myawesomedjangoapp restart;
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">echo <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>[log] - Finished collecting static assets<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span>
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">
</span></span></code></pre><p><em>I run my Django Apps as systemd services, if you don't you can just call python manage.py runserver. If you want to know how to setup Django the way I do just follow this very comprehensive tutorial over on <a rel="noopener nofollow noreferrer" href=https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu-14-04 target=_blank>Digital Ocean</a></em><h2 id=conclusion>Conclusion</h2><p>I am fully aware that there are more sophisticated methods of deployment through Docker, Travis (For continious integration) etc. But if you have a small app that you want to ship and you already have an infrastructure, I've found this method to be more than suitable.<p>Please report any missing info, mistake, error, typo. I'm on <a rel="noopener nofollow noreferrer" href=https://twitter.com/aaqaishtyaq target=_blank> twitter </a> if you wanna chat.</div></article></main><footer><div class=border></div><div class=footer><small class=footer-left> Copyright Â© Aaqa Ishtyaq </small><small class=footer-right> Links: <a href=https://github.com/aaqaishtyaq target=_blank>Github</a> | <a href=https://linkedin.com/in/aaqaishtyaq target=_blank>LinkedIn</a> </small></div><br><small class=footer> <a class=pgp href=https://keys.openpgp.org/vks/v1/by-fingerprint/AFB766F59A198D35DD8F925AC4BE1CE588EB9E21 target=_blank> AFB7 66F5 9A19 8D35 DD8F 925A C4BE 1CE5 88EB 9E21 </a> </small></footer></div>